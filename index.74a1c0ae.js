function t(t,e,a,r){Object.defineProperty(t,e,{get:a,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},s=a.parcelRequire94ca;null==s&&((s=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var a={id:t,exports:{}};return r[t]=a,e.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},a.parcelRequire94ca=s),s.register("bXuNP",(function(e,a){var r,i;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>i),(t=>i=t));var s={};r=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)s[e[a]]=t[e[a]]},i=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("bXuNP").register(JSON.parse('{"deqRD":"index.74a1c0ae.js","4zON0":"block.ed583535.png"}'));class n{static get Zero(){return new n(0,0)}static get One(){return new n(1,1)}static get Half(){return new n(.5,.5)}static get Up(){return new n(0,-1)}static get Down(){return new n(0,1)}static get Left(){return new n(-1,0)}static get Right(){return new n(1,0)}static fromAngle(t){return new n(Math.cos(t),Math.sin(t))}static isValid(t){return null!=t&&(!isNaN(t.x)&&!isNaN(t.y)&&(t.x!==1/0&&t.y!==1/0&&t.x!==-1/0&&t.y!==-1/0))}static distance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}constructor(t,e){this._x=0,this._y=0,this._x=t,this._y=e}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}setTo(t,e){this.x=t,this.y=e}equals(t,e=.001){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}distance(t){return t||(t=n.Zero),Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}squareDistance(t){return t||(t=n.Zero),Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)}get size(){return this.distance()}set size(t){const e=this.normalize().scale(t);this.setTo(e.x,e.y)}normalize(){const t=this.distance();return t>0?new n(this.x/t,this.y/t):new n(0,1)}average(t){return this.add(t).scale(.5)}scale(t){return t instanceof n?new n(this.x*t.x,this.y*t.y):new n(this.x*t,this.y*t)}add(t){return new n(this.x+t.x,this.y+t.y)}sub(t){return new n(this.x-t.x,this.y-t.y)}addEqual(t){return this.setTo(this.x+t.x,this.y+t.y),this}subEqual(t){return this.setTo(this.x-t.x,this.y-t.y),this}scaleEqual(t){return this.setTo(this.x*t,this.y*t),this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return t instanceof n?this.x*t.y-this.y*t.x:"number"==typeof t?new n(t*this.y,-t*this.x):void 0}static cross(t,e){return new n(-t*e.y,t*e.x)}perpendicular(){return new n(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return Math.atan2(this.y,this.x)}rotate(t,e){e||(e=new n(0,0));const a=Math.sin(t),r=Math.cos(t),i=r*(this.x-e.x)-a*(this.y-e.y)+e.x,s=a*(this.x-e.x)+r*(this.y-e.y)+e.y;return new n(i,s)}clone(){return new n(this.x,this.y)}toString(t){return t?`(${this.x.toFixed(t)}, ${this.y.toFixed(t)})`:`(${this.x}, ${this.y})`}}function o(t,e){return new n(t,e)}class h{static ortho(t,e,a,r,i,s){const n=new h;return n.data[0]=2/(e-t),n.data[1]=0,n.data[2]=0,n.data[3]=0,n.data[4]=0,n.data[5]=2/(r-a),n.data[6]=0,n.data[7]=0,n.data[8]=0,n.data[9]=0,n.data[10]=-2/(s-i),n.data[11]=0,n.data[12]=-(e+t)/(e-t),n.data[13]=-(r+a)/(r-a),n.data[14]=-(s+i)/(s-i),n.data[15]=1,n}static identity(){const t=new h;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}clone(){const t=new h;return t.data[0]=this.data[0],t.data[1]=this.data[1],t.data[2]=this.data[2],t.data[3]=this.data[3],t.data[4]=this.data[4],t.data[5]=this.data[5],t.data[6]=this.data[6],t.data[7]=this.data[7],t.data[8]=this.data[8],t.data[9]=this.data[9],t.data[10]=this.data[10],t.data[11]=this.data[11],t.data[12]=this.data[12],t.data[13]=this.data[13],t.data[14]=this.data[14],t.data[15]=this.data[15],t}scale(t,e){const a=this.data[0],r=this.data[1],i=this.data[2],s=this.data[3],n=this.data[4],o=this.data[5],h=this.data[6],d=this.data[7];return this.data[0]=a*t,this.data[1]=r*t,this.data[2]=i*t,this.data[3]=s*t,this.data[4]=n*e,this.data[5]=o*e,this.data[6]=h*e,this.data[7]=d*e,this}translate(t,e){const a=this.data[0],r=this.data[1],i=this.data[2],s=this.data[3],n=this.data[4],o=this.data[5],h=this.data[6],d=this.data[7],c=this.data[8],u=this.data[9],l=this.data[10],f=this.data[11],g=this.data[12],_=this.data[13],m=this.data[14],y=this.data[15];return this.data[12]=a*t+n*e+0*c+1*g,this.data[13]=r*t+o*e+0*u+1*_,this.data[14]=i*t+h*e+0*l+1*m,this.data[15]=s*t+d*e+0*f+1*y,this}rotate(t){const e=this.data[0],a=this.data[1],r=this.data[2],i=this.data[3],s=this.data[4],n=this.data[5],o=this.data[6],h=this.data[7],d=Math.sin(t),c=Math.cos(t);return this.data[0]=c*e+d*s,this.data[1]=c*a+d*n,this.data[2]=c*r+d*o,this.data[3]=c*i+d*h,this.data[4]=c*s-d*e,this.data[5]=c*n-d*a,this.data[6]=c*o-d*r,this.data[7]=c*h-d*i,this}multv(t){if(t instanceof n)return new n(t.x*this.data[0]+t.y*this.data[4]+0*this.data[6]+1*this.data[12],t.x*this.data[1]+t.y*this.data[5]+0*this.data[9]+1*this.data[13]);return[t[0]*this.data[0]+t[1]*this.data[4]+0*this.data[6]+1*this.data[12],t[0]*this.data[1]+t[1]*this.data[5]+0*this.data[9]+1*this.data[13]]}getAffineInverse(){const t=1/this.getBasisDeterminant(),e=this.data[0],a=this.data[4],r=this.data[1],i=this.data[5],s=h.identity();s.data[0]=i*t,s.data[1]=-r*t,s.data[4]=-a*t,s.data[5]=e*t;const n=this.data[12],o=this.data[13];return s.data[12]=-(n*s.data[0]+o*s.data[4]),s.data[13]=-(n*s.data[1]+o*s.data[5]),s}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}constructor(){this.data=new Float32Array(16)}}class d{constructor(t,e,a,r=!1){this._gl=t;const i=e*a;this.buffer=t.createBuffer(),this.numberOfVertices=e,this.sizePerVertex=a,this.isStatic=r,this.bufferData=new Float32Array(i)}fill(t){t(this.bufferData,this.numberOfVertices,this.sizePerVertex)}bind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer)}upload(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.bufferData,this.isStatic?t.STATIC_DRAW:t.DYNAMIC_DRAW)}}class c{constructor(t,e,a){this._layout=[],this._gl=t,this._vertexBuffer=a,this._shader=e}get totalVertexSizeBytes(){let t=0;for(const e of this._layout){let a=1;switch(e.glType){case this._gl.FLOAT:a=4;break;case this._gl.SHORT:a=2;break;default:a=1}t+=a*e.size}return t}addVertexAttributeLayout(t){const e=this._shader.attributes;for(let a of t){const t=e[a];if(!t)throw Error(a+" not found in the shader source");this._layout.push(t)}}bind(){this._vertexBuffer.bind();const t=this._gl;let e=0;for(const a of this._layout)t.vertexAttribPointer(a.location,a.size,a.glType,a.normalized,this.totalVertexSizeBytes,e),t.enableVertexAttribArray(a.location),e+=this._shader.getAttributeSize(a.name)}}class u{constructor(t){const e=t.layout.reduce(((t,e)=>t+e[1]),0);this.buffer=new d(t.gl,t.numberOfVertices,e,t.static),this.layout=new c(t.gl,t.shader,this.buffer),this.layout.addVertexAttributeLayout(t.layout.map((t=>t[0])))}}class l{get compiled(){return this._compiled}constructor(t,e){this._vertexSource=t,this._fragmentSource=e,this.uniforms={},this.attributes={},this.layout=[],this._vertexLayouts=[],this._vertexDefinition=[],this._compiled=!1}_createProgram(t,e,a){const r=t.createProgram();if(null===r)throw Error("Could not create graphics shader program");t.attachShader(r,e),t.attachShader(r,a),t.linkProgram(r);if(!t.getProgramParameter(r,t.LINK_STATUS))throw Error(`Could not link the program: [${t.getProgramInfoLog(r)}]`);return r}_compileShader(t,e,a){const r=t.createShader(a);if(null===r)throw Error(`Could not build shader: [${e}]`);t.shaderSource(r,e),t.compileShader(r);if(!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`Could not compile shader [${t.getShaderInfoLog(r)}]`);return r}setVertexAttributeLayout(t){const e=new Set(Object.keys(this.attributes));for(let a of t)e.has(a.name)&&(this.layout.push(this.attributes[a.name]),e.delete(a.name));if(e.size>0)throw new Error(`Specified vertex layout is missing some attributes that are in the shader source [${Array.from(e.values()).join(",")}]`)}getUniforms(t){const e=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),a=[];for(let r=0;r<e;r++){const e=t.getActiveUniform(this.program,r),i=t.getUniformLocation(this.program,e.name);a.push({name:e.name,type:e.type.toString(),location:i,data:null})}return a}getAttributes(t){const e=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),a=[];for(let r=0;r<e;r++){const e=t.getActiveAttrib(this.program,r),i=t.getAttribLocation(this.program,e.name);a.push({name:e.name,glType:this.getAttribPointerTypeFromAttributeType(e.type),size:this.getAttribPointerSizeFromFromAttributeType(e.type),location:i,normalized:!1})}return a}compile(t){this._gl=t;const e=this._compileShader(t,this._vertexSource,t.VERTEX_SHADER),a=this._compileShader(t,this._fragmentSource,t.FRAGMENT_SHADER),r=this._createProgram(t,e,a);this.program=r;const i=this.getAttributes(t);for(let t of i)this.attributes[t.name]=t;this.getUniforms(t);return this._compiled=!0,this.program}addVertexLayout(t){this._vertexLayouts.push(t)}createVertexMemoryDefinition(t){const e=t.layout.reduce(((t,e)=>t+e[1]),0),a=new d(this._gl,t.numberOfVertices,e,t.static);new c(this._gl,this,a).addVertexAttributeLayout(t.layout.map((t=>t[0])));const r=new u({gl:this._gl,shader:this,...t});return this._vertexLayouts.push(r.layout),r}addUniformMatrix(t,e){if(!e)throw Error(`Shader Uniform Matrix '${t}' was set to null or undefined`);const a=this._gl;this.uniforms[t]={name:t,type:"matrix4fv",location:a.getUniformLocation(this.program,t)??Error(`Could not find uniform matrix [${t}]`),data:e}}addUniformIntegerArray(t,e){if(!e)throw Error(`Shader Uniform Integery Array '${t}' was set to null or undefined`);const a=this._gl;this.uniforms[t]={name:t,type:"1iv",location:a.getUniformLocation(this.program,t)??Error(`Could not find uniform matrix [${t}]`),data:e}}addUniformInteger(t,e){if(!e)throw Error(`Shader Uniform Integery Array '${t}' was set to null or undefined`);const a=this._gl;this.uniforms[t]={name:t,type:"1i",location:a.getUniformLocation(this.program,t)??Error(`Could not find uniform [${t}]`),data:e}}addUniformFloat(t,e=0){const a=this._gl;this.uniforms[t]={name:t,type:"1f",location:a.getUniformLocation(this.program,t)??Error(`Could not find uniform [${t}]`),data:e}}addUniformFloat2(t,e=0,a=0){const r=this._gl;this.uniforms[t]={name:t,type:"2f",location:r.getUniformLocation(this.program,t)??Error(`Could not find uniform [${t}]`),data:[e,a]}}setAttribute(t,e,a,r=!1){const i=this._gl.getAttribLocation(this.program,t);this.attributes[t]={name:t,size:e,glType:a,normalized:r,location:i}}get vertexAttributeSize(){let t=0;for(const e of this.layout)t+=e.size;return t}get totalVertexSizeBytes(){let t=0;for(const e of this.layout){let a=1;switch(e.glType){case this._gl.FLOAT:a=4;break;case this._gl.SHORT:a=2;break;default:a=1}t+=a*e.size}return t}getAttribPointerTypeFromAttributeType(t){switch(t){case this._gl.LOW_FLOAT:case this._gl.HIGH_FLOAT:case this._gl.FLOAT:case this._gl.FLOAT_VEC2:case this._gl.FLOAT_VEC3:case this._gl.FLOAT_VEC4:case this._gl.FLOAT_MAT2:case this._gl.FLOAT_MAT3:case this._gl.FLOAT_MAT4:return this._gl.FLOAT;case this._gl.BYTE:return this._gl.BYTE;case this._gl.UNSIGNED_BYTE:return this._gl.UNSIGNED_BYTE;case this._gl.SHORT:return this._gl.SHORT;default:return this._gl.FLOAT}}getAttribPointerSizeFromFromAttributeType(t){switch(t){case this._gl.LOW_FLOAT:case this._gl.HIGH_FLOAT:case this._gl.FLOAT:return 1;case this._gl.FLOAT_VEC2:return 2;case this._gl.FLOAT_VEC3:return 3;case this._gl.FLOAT_VEC4:return 4;case this._gl.BYTE:case this._gl.UNSIGNED_BYTE:case this._gl.SHORT:default:return 1}}getAttributeSize(t){let e=1;switch(this.attributes[t].glType){case this._gl.LOW_FLOAT:case this._gl.HIGH_FLOAT:case this._gl.FLOAT:e=4;break;case this._gl.FLOAT_VEC2:e=8;break;case this._gl.FLOAT_VEC3:e=12;break;case this._gl.FLOAT_VEC4:case this._gl.FLOAT_MAT2:e=16;break;case this._gl.FLOAT_MAT3:e=36;break;case this._gl.FLOAT_MAT4:e=64;break;case this._gl.BYTE:e=1;break;case this._gl.INT:e=4;break;case this._gl.SHORT:e=2;break;case this._gl.INT_VEC2:e=8;break;case this._gl.INT_VEC3:case this._gl.INT_VEC4:e=12;break;case this._gl.UNSIGNED_INT:e=4;break;default:e=1}return e*this.attributes[t].size}use(){const t=this._gl;t.useProgram(this.program);for(const t of this._vertexLayouts)t.bind();for(const e in this.uniforms){const a=this.uniforms[e];switch(a.type){case"matrix4fv":t.uniformMatrix4fv(a.location,!1,a.data);break;case"1iv":t.uniform1iv(a.location,a.data);break;case"1i":t.uniform1i(a.location,a.data);break;case"2f":t.uniform2f(a.location,a.data[0],a.data[1]);break;case"1f":t.uniform1f(a.location,a.data)}}}}function f(t){return 0==(t&t-1)}function g(t){return f(t)?t:function(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}(t)}class _{static registerContext(t){_._GL=t}static get(t){return _._TEXTURE_MAP.get(t)}static has(t){return _._TEXTURE_MAP.has(t)}static load(t,e=!1){const a=_._GL;if(!a)return null;let r=null;if(_.has(t)&&(r=_.get(t)),r){if(e){a.bindTexture(a.TEXTURE_2D,r);const e=_.toPowerOfTwoImage(t);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e)}return r}r=a.createTexture();const i=_.toPowerOfTwoImage(t);return a.bindTexture(a.TEXTURE_2D,r),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),_._TEXTURE_MAP.set(t,r),r}static toPowerOfTwoImage(t){const e=_._POT_CANVAS,a=_._POT_CTX;return f(t.width)&&f(t.height)||(e.width=g(t.width),e.height=g(t.height),a.imageSmoothingEnabled=!1,a.clearRect(0,0,e.width,e.height),a.drawImage(t,0,0,t.width,t.height),t=e),t}}_._POT_CANVAS=document.createElement("canvas"),_._POT_CTX=_._POT_CANVAS.getContext("2d"),_._TEXTURE_MAP=new Map;var m;s.register("kPq84",(function(e,a){var r;t(e.exports,"getBundleURL",(()=>r),(t=>r=t));var i={};function s(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return s(t[2])}return"/"}(),i[t]=e),e}})),m=s("kPq84").getBundleURL("deqRD")+s("bXuNP").resolve("4zON0");class y{constructor(t){this.left=0,this.right=0,this.top=0,this.bottom=0,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom}}function x(t,e,a,r){const i=[],s=[],n=[];for(let t=0;t<e+1;t++)s[t]=t*a;for(let e=0;e<t+1;e++)n[e]=e*r;for(let a=0;a<e;a++)for(let e=0;e<t;e++){const t=new y({left:s[a],right:s[a+1],top:n[e],bottom:n[e+1]});i.push(t)}return i}class T{save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(t,e){return this._currentTransform.translate(t,e)}rotate(t){return this._currentTransform.rotate(t)}scale(t,e){return this._currentTransform.scale(t,e)}set current(t){this._currentTransform=t}get current(){return this._currentTransform}constructor(){this._transforms=[],this._currentTransform=h.identity()}}function E(t,e,a){return o(t.x/e.width*a.width,t.y/e.height*a.height)}function w(t,e,a){return o(t.x/a.width*e.width,t.y/a.height*e.height)}let p=!1,b=!1,A=!1,v=!1,R=!1,L=!1,S=!1;const O=document.getElementById("current-pixel-ratio");document.getElementById("reset").addEventListener("click",(()=>{Q()}));const P=document.getElementById("scroll-x");b=!!P.checked,P.addEventListener("change",(t=>{b=t.target.checked}));const U=document.getElementById("scroll-y");A=!!U.checked,U.addEventListener("change",(t=>{A=t.target.checked}));const F=document.getElementById("uv-bodge");p=!!F.checked,F.addEventListener("change",(t=>{p=t.target.checked,Q()}));const I=document.getElementById("truncate");R=!!I.checked,I.addEventListener("change",(t=>{R=t.target.checked,Q()}));const D=document.getElementById("unnecessary-geometry-scaling");v=!!D.checked,D.addEventListener("change",(t=>{v=t.target.checked,Q()}));const M=document.getElementById("pixel-to-screen-nudge");S=!!M.checked,M.addEventListener("change",(t=>{S=t.target.checked,Q()}));const N=document.getElementById("shared-tile-edge");L=!!N.checked,N.addEventListener("change",(t=>{L=t.target.checked,Q()}));const B=document.getElementById("game"),C={width:800,height:600};B.width=C.width,B.height=C.height,B.style.imageRendering="pixelated",""===B.style.imageRendering&&(B.style.imageRendering="crisp-edges");const k=B.getContext("webgl",{antialias:!1,powerPreference:"high-performance"});function V(){window.devicePixelRatio>1&&(B.width=C.width*window.devicePixelRatio,B.height=C.height*window.devicePixelRatio,B.style.width=C.width+"px",B.style.height=C.height+"px"),console.log("pixel ratio",window.devicePixelRatio),O.innerText=window.devicePixelRatio.toString()}function z(){window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`).addEventListener("change",G,{once:!0})}function G(){z(),V()}V(),z(),_.registerContext(k);const X=g(64),H=g(48);let Y,$,q;const W=new class{constructor(t,e){this._gl=t,this.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),this.gltype=t.UNSIGNED_SHORT;t.getExtension("OES_element_index_uint")&&(this.gltype=t.UNSIGNED_INT);const a=6*e;this.bufferData=new Uint32Array(a);let r=0;for(let t=0;t<a;t+=6)this.bufferData[t+0]=r+0,this.bufferData[t+1]=r+1,this.bufferData[t+2]=r+2,this.bufferData[t+3]=r+2,this.bufferData[t+4]=r+1,this.bufferData[t+5]=r+3,r+=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.bufferData),t.STATIC_DRAW)}size(){return this.bufferData.length}bind(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer)}}(k,200),j=new Image;let Z,K;j.src=e(m),j.decode().then((()=>{Z=_.load(j)}));const J=o(0,0);function Q(){K=new T;let t=h.ortho(0,C.width,C.height,0,400,-400);v&&(K.current=h.identity(),t=h.ortho(0,B.width,B.height,0,400,-400),K.scale(window.devicePixelRatio,window.devicePixelRatio)),k.viewport(0,0,B.width,B.height),k.disable(k.DEPTH_TEST),k.clearColor(114/255,213/255,224/255,1),k.clear(k.COLOR_BUFFER_BIT),k.enable(k.BLEND),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),$=new l(e('precision highp float;\n#define GLSLIFY 1\n// World position of geometry\nattribute vec2 a_position;\n\n// UV coordinate\nattribute vec2 a_texcoord;\nvarying vec2 v_texcoord;\n\n// Orthographic "world" transform matrix\nuniform mat4 u_matrix;\n\n// Camera position\nuniform vec2 u_camera;\n\nvoid main() {\n\n   // Set the vertex position using the ortho transform matrix\n   gl_Position = u_matrix * vec4(a_position + u_camera, 0, 1.0);\n\n   // Pass through the UV coord to the fragment shader\n   v_texcoord = a_texcoord;\n}'),e("precision mediump float;\n#define GLSLIFY 1\n\n// UV coord\nvarying vec2 v_texcoord;\n\n// Texture in the current draw\nuniform sampler2D u_texture;\n\nvoid main() {\n   vec4 color = texture2D(u_texture, v_texcoord);\n\n   gl_FragColor = color;\n}")),$.compile(k),$.addUniformMatrix("u_matrix",t.data),q=$.createVertexMemoryDefinition({numberOfVertices:800,layout:[["a_position",2]],static:!1});const a=new d(k,800,2,!0),r=new c(k,$,a);r.addVertexAttributeLayout(["a_texcoord"]),$.addVertexLayout(r),a.fill(((t,e,a)=>{let r=0;for(let i=0;i<e;i+=4*a)t[i+r+0]=0,t[i+r+1]=0,r+=a,t[i+r+0]=0,t[i+r+1]=(48-(p?.01:0))/H,r+=a,t[i+r+0]=(64-(p?.01:0))/X,t[i+r+1]=0,r+=a,t[i+r+0]=(64-(p?.01:0))/X,t[i+r+1]=(48-(p?.01:0))/H,r=0})),a.upload(),Y=L?x(4,20,64,48):function(t,e,a,r){const i=[],s=a/2,n=r/2;for(let o=0;o<e;o++)for(let e=0;e<t;e++){const t=o*a+s,h=e*r+n,d=new y({left:~~(t-s),right:~~(t+s),top:~~(h-n),bottom:~~(h+n)});i.push(d)}return i}(4,20,64,48),J.y=201.00000000000023,J.x=89.5196762084961}window.cameraPos=J,Q();let tt=0;function et(t){let e=o(R?~~t.left:t.left,R?~~t.top:t.top),a=o(R?~~t.right:t.right,R?~~t.bottom:t.bottom);L&&(e=K.current.multv(e),a=K.current.multv(a)),R&&(e.x=~~e.x,e.y=~~e.y,a.x=~~a.x,a.y=~~a.y),S&&(e=function(t,e,a){e=t.getAffineInverse().multv(e);const r={width:a.width*window.devicePixelRatio,height:a.height*window.devicePixelRatio},i=E(e,a,r).add(o(.5,.5)),s=w(o(Math.floor(i.x),Math.floor(i.y)),a,r);return t.multv(s)}(K.current,e,C),a=function(t,e,a){e=t.getAffineInverse().multv(e);const r={width:a.width*window.devicePixelRatio,height:a.height*window.devicePixelRatio},i=E(e,a,r).add(o(.5,.5)),s=w(o(Math.ceil(i.x),Math.ceil(i.y)),a,r);return t.multv(s)}(K.current,a,C));const r=q.buffer.bufferData;r[tt++]=e.x,r[tt++]=e.y,r[tt++]=e.x,r[tt++]=a.y,r[tt++]=a.x,r[tt++]=e.y,r[tt++]=a.x,r[tt++]=a.y}function at(){k.clearColor(114/255,213/255,224/255,1),k.clear(k.COLOR_BUFFER_BIT),k.viewport(0,0,B.width,B.height),K.save();let t=o(-J.x+C.width/2,-J.y+C.height/2);R&&(t.x=~~t.x,t.y=~~t.y),K.translate(t.x,t.y),K.save(),K.translate(100,300),Y=L?x(4,20,64,48):function(t,e,a,r,i){const s=[];for(let n=0;n<a;n++)for(let a=0;a<e;a++){t.save(),t.translate(n*r,a*i);let e=o(0,0),h=o(r,i);e=t.current.multv(e),h=t.current.multv(h);const d=new y({left:e.x,right:h.x,top:e.y,bottom:h.y});s.push(d),t.restore()}return s}(K,4,20,64,48);for(const t of Y)et(t);K.restore(),K.restore(),$.use(),k.activeTexture(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,Z),q.buffer.upload(),W.bind(),k.drawElements(k.TRIANGLES,6*Y.length,W.gltype,0),tt=0}let rt=performance.now();const it=t=>{let e=t-rt;var a;e>200&&(e=1),window.requestAnimationFrame(it),a=e,b&&(J.x+=a/1e3*3),A&&(J.y+=a/1e3*.1),at(),rt=t};it(rt-16);
//# sourceMappingURL=index.74a1c0ae.js.map
